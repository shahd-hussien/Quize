<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breast Pathology Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #fce4ec;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            position: relative;
            max-width: 600px;
            width: 100%;
            padding: 2rem;
            background-color: #fff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .modal {
            display: flex;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            max-width: 90%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-out;
            margin-top: auto;
            margin-bottom: auto;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .review-item {
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        .correct-answer {
            color: #16a34a;
        }
        .wrong-answer {
            color: #dc2626;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 3rem;
            font-weight: bold;
            color: rgba(255, 182, 193, 0.3);
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-pink-100 p-4">

    <div class="watermark">
        دفعة إكسير الشفاء
    </div>

    <div class="container">
        <h1 class="text-3xl font-bold mb-6 text-gray-800 text-center">Breast Pathology Batch 14</h1>

        <div id="quiz-container">
            <div id="quiz-question-card" class="bg-pink-50 p-6 rounded-lg mb-6 shadow-sm">
                <h2 id="quiz-question" class="text-xl font-semibold mb-4 text-gray-700"></h2>
                <div id="quiz-options" class="space-y-3"></div>
            </div>

            <div id="quiz-feedback" class="text-lg font-medium text-center"></div>
            <button id="quiz-next-button" class="mt-6 w-full px-6 py-3 bg-pink-600 text-white rounded-lg font-bold hover:bg-pink-700 transition duration-300 transform hover:scale-105 shadow-md">
                السؤال التالي
            </button>
        </div>

        <!-- Modal for end-of-quiz message and review -->
        <div id="quiz-modal" class="modal hidden">
            <div class="modal-content">
                <h2 id="modal-title" class="text-2xl font-bold mb-4">نتائج الاختبار</h2>
                <p id="modal-message" class="text-lg mb-4"></p>
                <div id="quiz-review" class="text-left mt-6 max-h-96 overflow-y-auto"></div>
                <button id="modal-close-button" class="mt-6 w-full px-6 py-3 bg-pink-600 text-white rounded-lg font-bold hover:bg-pink-700 transition duration-300">
                    إغلاق
                </button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { question: "What is the most common benign tumor of the female breast?", options: ["A. Ductal papilloma", "B. Fibroadenoma", "C. Fibrocystic change", "D. Phyllodes tumor"], answer: "B. Fibroadenoma" },
            { question: "Which of the following characteristics is a clinical feature of a fibroadenoma?", options: ["A. A fixed and painful mass", "B. A mobile and well-defined mass", "C. Blood-stained nipple discharge", "D. Peau d’orange skin"], answer: "B. A mobile and well-defined mass" },
            { question: "What is the main cause of Fibrocystic change, according to the text?", options: ["A. Estrogen deficiency", "B. Bacterial infection", "C. Increased estrogen", "D. Physical trauma"], answer: "C. Increased estrogen" },
            { question: "According to the text, what is the reason for the poor prognosis of male breast carcinoma?", options: ["A. It lacks the fibrofatty pad and can spread directly to the chest wall.", "B. It is typically diagnosed at a later stage.", "C. Its cellular type is more aggressive.", "D. It is not affected by hormonal therapies."], answer: "A. It lacks the fibrofatty pad and can spread directly to the chest wall." },
            { question: "Which type of invasive carcinoma is characterized microscopically by an 'Indian filing pattern'?", options: ["A. Invasive ductal carcinoma", "B. Invasive lobular carcinoma", "C. Medullary carcinoma", "D. Tubular carcinoma"], answer: "B. Invasive lobular carcinoma" },
            { question: "What is the prognosis for 'Carcinoma in situ' (CIS)?", options: ["A. It always has a poor prognosis.", "B. It has a good prognosis if completely removed and not associated with invasive carcinoma.", "C. It has no prognostic significance.", "D. Its prognosis depends solely on its subtype."], answer: "B. It has a good prognosis if completely removed and not associated with invasive carcinoma." },
            { question: "What is the key microscopic feature associated with Traumatic Fat Necrosis?", options: ["A. Dilated ducts with secretions", "B. Ruptured fat cells with chronic inflammatory infiltrate", "C. Pleomorphic malignant cells", "D. Epithelial hyperplasia"], answer: "B. Ruptured fat cells with chronic inflammatory infiltrate" },
            { question: "Which of the following is considered a major factor affecting the prognosis of breast cancer, according to the content?", options: ["A. Hormone receptor status", "B. Histological type", "C. Tumor size", "D. All of the above"], answer: "C. Tumor size" },
            { question: "What is the condition that causes enlargement of male breast tissue?", options: ["A. Gynecomastia", "B. Male breast carcinoma", "C. Acute mastitis", "D. Fibrocystic change"], answer: "A. Gynecomastia" },
            { question: "What is the key microscopic feature of Plasma Cell Mastitis (Mammary duct ectasia)?", options: ["A. Infiltration of neutrophils", "B. Periductal infiltration of lymphocytes and plasma cells", "C. Dilated ducts filled with secretions", "D. Ruptured fat cells"], answer: "B. Periductal infiltration of lymphocytes and plasma cells" },
            { question: "Which of the following is a benign tumor composed of both epithelial and stromal components?", options: ["A. Invasive carcinoma", "B. Ductal papilloma", "C. Phyllodes tumor", "D. Fat necrosis"], answer: "C. Phyllodes tumor" },
            { question: "What is a clinical feature of a Ductal papilloma?", options: ["A. A firm and mobile lump", "B. Blood-stained nipple discharge", "C. Peau d’orange skin", "D. A painful and well-defined mass"], answer: "B. Blood-stained nipple discharge" },
            { question: "Which of the following conditions increases the risk of subsequent invasive carcinoma?", options: ["A. Fibrocystic change", "B. Traumatic fat necrosis", "C. Atypical hyperplasia", "D. Benign phyllodes tumor"], answer: "C. Atypical hyperplasia" },
            { question: "Which subtype of Ductal Carcinoma in situ (DCIS) is characterized by the presence of necrotic material in the center of the ducts?", options: ["A. Cribriform carcinoma", "B. Comedo carcinoma", "C. Medullary carcinoma", "D. Solid carcinoma"], answer: "B. Comedo carcinoma" },
            { question: "What is the correct microscopic description of Invasive Lobular Carcinoma?", options: ["A. Well-differentiated cells forming small ducts", "B. Highly pleomorphic malignant cells with lymphocytic infiltrate", "C. Small cells invading between stromal fibers in an 'Indian filing pattern'", "D. Cells floating in lakes of mucin"], answer: "C. Small cells invading between stromal fibers in an 'Indian filing pattern'" },
            { question: "What is the histological description of Invasive Ductal Carcinoma (NST)?", options: ["A. Cells forming small tubules", "B. Pleomorphic malignant cells with a lymphocytic infiltrate", "C. Irregular ducts and glands invading the epithelial cells", "D. Small cells in an 'Indian filing pattern'"], answer: "C. Irregular ducts and glands invading the epithelial cells" },
            { question: "What is the major prognostic factor related to the spread of the tumor?", options: ["A. Tumor size", "B. Hormonal factors", "C. Metastasis to lymph nodes or distant sites", "D. Age at diagnosis"], answer: "C. Metastasis to lymph nodes or distant sites" },
            { question: "What factor distinguishes a Phyllodes tumor from a Fibroadenoma?", options: ["A. Age of occurrence", "B. Clinical appearance", "C. Tissue composition", "D. Stromal hypercellularity"], answer: "D. Stromal hypercellularity" },
            { question: "What is the key clinical presentation of Traumatic Fat Necrosis?", options: ["A. A mobile and well-defined mass", "B. A firm mass that can mimic carcinoma", "C. Bloody nipple discharge", "D. Redness, pain, and swelling"], answer: "B. A firm mass that can mimic carcinoma" },
            { question: "What are the characteristics of Medullary carcinoma?", options: ["A. A mucinous tumor with a glistening surface", "B. Pleomorphic malignant cells with lymphocytic infiltrate", "C. Signet ring-shaped cells", "D. Cells forming small tubules"], answer: "B. Pleomorphic malignant cells with lymphocytic infiltrate" },
            { question: "What is a key difference between a Fibroadenoma and a Phyllodes tumor?", options: ["A. Fibroadenomas are always benign, and Phyllodes tumors are always malignant.", "B. Phyllodes tumors are distinguished by their stromal hypercellularity.", "C. Fibroadenomas occur at an older age.", "D. Fibroadenomas are much larger in size."], answer: "B. Phyllodes tumors are distinguished by their stromal hypercellularity." },
            { question: "According to the content, what percentage of female cancers is breast carcinoma?", options: ["A. 30% of all female cancers", "B. 10% of all female cancers", "C. 50% of all female cancers", "D. 80% of all female cancers"], answer: "A. 30% of all female cancers" },
            { question: "What is the most important factor in determining the prognosis of breast cancer, according to the text?", options: ["A. Histological type", "B. Hormonal receptors", "C. Presence of invasion (Invasive)", "D. Age at diagnosis"], answer: "C. Presence of invasion (Invasive)" },
            { question: "What is the characteristic microscopic feature of Fibrocystic change?", options: ["A. Dilated ducts (cysts) and fibrosis of the stroma", "B. Pleomorphic malignant cells", "C. Plasma cell infiltration", "D. Fat necrosis"], answer: "A. Dilated ducts (cysts) and fibrosis of the stroma" },
            { question: "Which of the following factors are considered minor prognostic factors for breast cancer?", options: ["A. Tumor size", "B. Metastasis to lymph nodes", "C. Hormone receptors", "D. All of the above"], answer: "C. Hormone receptors" },
            { question: "What is the correct microscopic description of Tubular carcinoma?", options: ["A. Pleomorphic cells with lymphocytic infiltrate", "B. Well-differentiated cells forming small ducts or tubules", "C. Signet ring-shaped cells", "D. Cells floating in lakes of mucin"], answer: "B. Well-differentiated cells forming small ducts or tubules" },
            { question: "According to the content, what is the typical age for a fibroadenoma?", options: ["A. Young women (25-35 years)", "B. Older women (45 years)", "C. Older women (35-55 years)", "D. Any age"], answer: "A. Young women (25-35 years)" },
            { question: "What genetic factor increases the risk of breast cancer?", options: ["A. Mutations in BRCA1 and BRCA2 genes", "B. Mutations in the TP53 gene", "C. Atypical hyperplasia", "D. Fibrocystic change"], answer: "A. Mutations in BRCA1 and BRCA2 genes" },
            { question: "Which of the following is considered a major prognostic factor for breast cancer?", options: ["A. Metastasis", "B. Histological type", "C. Hormone receptors", "D. Age"], answer: "A. Metastasis" },
            { question: "What is the gross appearance of Plasma Cell Mastitis?", options: ["A. A firm mass that mimics carcinoma", "B. Dilated ducts filled with secretions", "C. A mobile and well-defined mass", "D. Peau d’orange skin"], answer: "B. Dilated ducts filled with secretions" },
            { question: "What is the characteristic microscopic feature of Acute Mastitis?", options: ["A. Neutrophil infiltration", "B. Plasma cell infiltration", "C. Ductal dilation", "D. Fibrosis"], answer: "A. Neutrophil infiltration" },
            { question: "What is the microscopic appearance of Paget disease of the breast?", options: ["A. Large cells with clear cytoplasm in the epidermis", "B. Pleomorphic tumor ducts", "C. Cells floating in lakes of mucin", "D. Ruptured fat cells"], answer: "A. Large cells with clear cytoplasm in the epidermis" },
            { question: "Which tissues compose a fibroadenoma?", options: ["A. Epithelial cells", "B. Stromal cells", "C. Lymphocytes", "D. Both epithelial and stromal cells"], answer: "D. Both epithelial and stromal cells" },
            { question: "According to the content, what is the incidence of male breast carcinoma?", options: ["A. Less than 1% of all breast cancers", "B. About 5%", "C. More than 10%", "D. It affects males more than females"], answer: "A. Less than 1% of all breast cancers" },
            { question: "Which subtype of invasive carcinoma is composed of cells floating in lakes of mucin?", options: ["A. Medullary carcinoma", "B. Invasive lobular carcinoma", "C. Mucinous carcinoma", "D. Tubular carcinoma"], answer: "C. Mucinous carcinoma" },
            { question: "What is the most important prognostic factor for breast cancer among the following?", options: ["A. Histological type", "B. Histological grade", "C. Presence of vascular invasion", "D. Metastasis to lymph nodes"], answer: "D. Metastasis to lymph nodes" }
        ];

        const userAnswers = [];

        const questionElement = document.getElementById('quiz-question');
        const optionsElement = document.getElementById('quiz-options');
        const nextButton = document.getElementById('quiz-next-button');
        const feedbackElement = document.getElementById('quiz-feedback');
        const modal = document.getElementById('quiz-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const quizReview = document.getElementById('quiz-review');
        const modalCloseButton = document.getElementById('modal-close-button');

        let currentQuestionIndex = 0;
        let score = 0;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            questionElement.textContent = currentQuestion.question;
            optionsElement.innerHTML = '';
            feedbackElement.textContent = '';
            nextButton.style.display = 'none';

            const shuffledOptions = shuffle([...currentQuestion.options]);

            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('w-full', 'py-2', 'px-4', 'bg-pink-200', 'rounded-lg', 'text-gray-800', 'font-medium', 'hover:bg-pink-300', 'transition', 'duration-200', 'transform', 'hover:scale-105');
                button.addEventListener('click', () => selectOption(option));
                optionsElement.appendChild(button);
            });
        }

        function selectOption(selectedOption) {
            const currentQuestion = questions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;

            userAnswers.push({
                question: currentQuestion.question,
                selected: selectedOption,
                correct: currentQuestion.answer,
                isCorrect: isCorrect
            });

            if (isCorrect) {
                feedbackElement.textContent = 'إجابة صحيحة!';
                feedbackElement.classList.remove('text-red-500');
                feedbackElement.classList.add('text-green-600');
                score++;
            } else {
                feedbackElement.textContent = `إجابة خاطئة. الإجابة الصحيحة هي: ${currentQuestion.answer}`;
                feedbackElement.classList.remove('text-green-600');
                feedbackElement.classList.add('text-red-500');
            }

            Array.from(optionsElement.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === currentQuestion.answer) {
                    button.classList.add('bg-green-500', 'text-white');
                    button.classList.remove('bg-pink-200', 'hover:bg-pink-300');
                } else if (button.textContent === selectedOption) {
                    button.classList.add('bg-red-500', 'text-white');
                    button.classList.remove('bg-pink-200', 'hover:bg-pink-300');
                }
                button.classList.remove('hover:scale-105');
            });

            nextButton.style.display = 'block';
        }

        function handleNextButton() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            const totalQuestions = questions.length;
            const percentage = (score / totalQuestions) * 100;

            modalTitle.textContent = "نتائج الاختبار";
            if (percentage === 100) {
                modalMessage.textContent = 'فل مارك!😳😳';
            } else if (percentage >= 60) {
                modalMessage.textContent = `ادائك نص و نص 🫴🏻🫳🏻بس ناجح عادي`;
            } else {
                modalMessage.textContent = 'ادائك مش ولابد😟😟';
            }
            modalMessage.textContent += ` (درجتك: ${score} / ${totalQuestions}, ${percentage.toFixed(0)}%)`;

            displayReview();
            modal.classList.remove('hidden');
            nextButton.style.display = 'none';
            document.getElementById('quiz-container').classList.add('hidden');
        }

        function displayReview() {
            quizReview.innerHTML = '<h3 class="text-xl font-bold mb-4">مراجعة الإجابات</h3>';
            userAnswers.forEach((answer, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item');
                
                const questionTitle = document.createElement('p');
                questionTitle.classList.add('font-semibold', 'mb-2');
                questionTitle.textContent = `السؤال ${index + 1}: ${answer.question}`;
                reviewItem.appendChild(questionTitle);

                const yourAnswer = document.createElement('p');
                yourAnswer.textContent = `إجابتك: ${answer.selected}`;
                if (answer.isCorrect) {
                    yourAnswer.classList.add('correct-answer');
                } else {
                    yourAnswer.classList.add('wrong-answer');
                    const correctAnswer = document.createElement('p');
                    correctAnswer.textContent = `الإجابة الصحيحة: ${answer.correct}`;
                    correctAnswer.classList.add('correct-answer');
                    reviewItem.appendChild(correctAnswer);
                }
                reviewItem.appendChild(yourAnswer);
                
                quizReview.appendChild(reviewItem);
            });
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.length = 0;
            modal.classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            showQuestion();
            nextButton.textContent = 'السؤال التالي';
        }

        nextButton.addEventListener('click', handleNextButton);
        modalCloseButton.addEventListener('click', restartQuiz);

        showQuestion();
    </script>

</body>
</html>

